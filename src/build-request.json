{
  "kind": "build_request",
  "title": "Add multiple photo upload and product detail page with image carousel",
  "projectName": "Luxury In Times",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-26",
      "text": "Modify backend Watch type in main.mo to store images as an array of Blob values (images: [Blob]) instead of a single image, supporting up to 5 images per watch",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Admin panel will allow uploading up to 5 images per watch",
          "Backend will store image URLs as an array in the Motoko actor"
        ]
      },
      "acceptanceCriteria": [
        "Watch type has images field defined as [Blob] array",
        "Array can store up to 5 blob entries",
        "First image in array serves as primary/main image",
        "All existing CRUD operations (addWatch, updateWatch, getWatch) handle image arrays correctly"
      ]
    },
    {
      "id": "REQ-27",
      "text": "Update AddWatchForm component to support uploading up to 5 images per watch with multiple file input, displaying preview thumbnails for each uploaded image, and submitting all images as an array to the backend",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Admin panel form will support uploading up to 5 images per watch"
        ]
      },
      "acceptanceCriteria": [
        "File input accepts multiple images (up to 5)",
        "Preview thumbnails display for each selected image",
        "Form validation ensures at least 1 image is uploaded",
        "Form validation prevents more than 5 images",
        "All images are converted to Uint8Array and submitted to backend as array",
        "Maintains luxury black and gold styling consistent with existing admin forms"
      ]
    },
    {
      "id": "REQ-28",
      "text": "Update EditWatchModal component to support uploading multiple replacement images (up to 5 total), displaying existing images with option to remove individual images, and maintaining image array on backend update",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Admin panel form will support uploading up to 5 images per watch"
        ]
      },
      "acceptanceCriteria": [
        "Modal displays all existing images as thumbnails",
        "User can remove individual existing images",
        "User can add new images up to 5 total",
        "Form prevents exceeding 5 images total",
        "Updated image array is sent to backend on save",
        "Maintains luxury styling consistent with existing modal"
      ]
    },
    {
      "id": "REQ-29",
      "text": "Update ProductCard component to display the first image from the images array as the primary thumbnail on product listing cards",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "First image becomes the primary thumbnail on product listing cards"
        ]
      },
      "acceptanceCriteria": [
        "Product card displays images[0] as the main product image",
        "Image conversion from Uint8Array to blob URL works correctly",
        "Fallback handling if images array is empty",
        "No visual regression from existing product card styling"
      ]
    },
    {
      "id": "REQ-30",
      "text": "Create a ProductDetailPage component at route /products/:id that displays full watch details including name, company, model, price, gender, description, and an elegant image carousel/gallery showing all watch photos with smooth transitions and luxury styling",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Product detail pages will display all images in an elegant carousel/gallery",
          "Customers can click through different angles and close-ups of each watch",
          "Smooth transitions and luxury styling throughout"
        ]
      },
      "acceptanceCriteria": [
        "Route /products/:id displays detailed view of selected watch",
        "Image carousel displays all images from the images array",
        "Carousel supports navigation (next/previous buttons or dots)",
        "Smooth transitions between images with luxury animations",
        "Full watch details displayed: name, company, model, price, gender, description",
        "Add to Cart button present and functional",
        "Page uses black, gold, and white luxury color palette",
        "Responsive design for mobile and desktop viewports",
        "Loading state while fetching watch data",
        "Error handling if watch not found"
      ]
    },
    {
      "id": "REQ-31",
      "text": "Update ProductCard component to be clickable and navigate to the product detail page at /products/:id when clicked",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Clicking anywhere on the product card navigates to /products/:id route",
        "Product ID is passed correctly in the route parameter",
        "Add to Cart button still functions without triggering navigation",
        "Hover effects indicate card is clickable"
      ]
    },
    {
      "id": "REQ-32",
      "text": "Update FeaturedWatches component to display the first image from images array for each featured watch",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Featured watches display images[0] as thumbnail",
        "Image conversion from Uint8Array works correctly",
        "No visual regression from existing featured watches display"
      ]
    },
    {
      "id": "REQ-33",
      "text": "Update WatchManagementList component in admin panel to display the first image from images array as thumbnail for each watch in the management list",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Watch management list displays images[0] as thumbnail",
        "All watch details remain visible",
        "Edit and delete actions still function correctly"
      ]
    },
    {
      "id": "REQ-34",
      "text": "Create migration.mo file to migrate existing watches with single image field to new images array structure, preserving existing watch data",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Migration converts single image Blob to [Blob] array with one element",
        "All existing watch data is preserved during migration",
        "Migration handles empty/null image cases",
        "Canister upgrade succeeds without data loss"
      ]
    }
  ],
  "constraints": [
    "Maximum 5 images per watch enforced in both frontend and backend",
    "First image in array must be used as primary thumbnail across all product displays",
    "Image storage uses Blob type in Motoko backend, converted to Uint8Array in frontend",
    "Maintain single-actor architecture with all logic in backend/main.mo",
    "Preserve existing luxury black/gold/white color palette and styling throughout new components",
    "Do not modify immutable frontend paths: useInternetIdentity.ts, useInternetIdentity.tsx, useActor.ts, main.tsx, components/ui",
    "Product detail page route must be /products/:id following REST conventions"
  ],
  "nonGoals": [
    "Video upload support",
    "Image compression or optimization beyond basic blob storage",
    "Advanced image editing features in admin panel",
    "Image zoom or 360-degree view functionality",
    "Separate image management system or CDN integration",
    "Batch image upload for multiple watches simultaneously"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}